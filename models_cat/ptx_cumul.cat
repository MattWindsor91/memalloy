(* Cumulative version of the PTX model. From Section 6.2 of:
https://johnwickerson.github.io/papers/memalloy.pdf#page=10
 *)

"PTX"

include "ptx_base.cat"

let rmo(r,f) = dp | rfe | co | fr | (r?; f; r?)

let CTArmo = rmo([_], cta_fence) & scta
let GLrmo = rmo(CTArmo+, gl_fence) & sgl
let SYSrmo = rmo(GLrmo+, sys_fence)

acyclic CTArmo as CTAconstraint
acyclic GLrmo as GLconstraint
acyclic SYSrmo as SYSconstraint
